# scheduler.py
# ุฅุฏุงุฑุฉ ุงูุชุญุฏูุซุงุช ุงูุฏูุฑูุฉ ููุจูุช (ููุงูุน ุงูุฃููุงู ุงูุนุฑุจูุฉ ูุงููุชุฑุฌูุฉ)

import schedule
import time
from arabic_cinema_sites import get_free_arabic_sites

# =========================
# ุฏุงูุฉ ุชุญุฏูุซ ุงูููุงูุน
# =========================
def update_free_arabic_sites():
    """
    ุชุญุฏูุซ ูุงุฆูุฉ ููุงูุน ุงูุฃููุงู ูุงููุณูุณูุงุช ุงูุนุฑุจูุฉ ูุงููุชุฑุฌูุฉ.
    ูููู ุชุนุฏูู ูุฐู ุงูุฏุงูุฉ ูุงุญููุง ูุชุฎุฒูู ุงููุชุงุฆุฌ ูู ูุงุนุฏุฉ ุจูุงูุงุช.
    """
    sites = get_free_arabic_sites()
    
    # ูุซุงู: ููุง ุญูุธูุง ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ูุฌุฑุฏ ุทุจุงุนุฉ ููุนููุฉ
    print("๐ ุชุญุฏูุซ ุงูููุงูุน ุงูุนุฑุจูุฉ ุจุฏุฃ...")
    for site in sites:
        print(f"โ {site['title']} - {site['link']} [{site['type']}]")
    print("๐ ุชุญุฏูุซ ุงูููุงูุน ุงูุนุฑุจูุฉ ุงูุชูู!\n")


# =========================
# ุฌุฏูู ุงูุชุญุฏูุซุงุช ุงูุฏูุฑูุฉ
# =========================
def schedule_updates():
    """
    ุฅุนุฏุงุฏ ุงูุฌุฏูู ุงูุฒููู ูุชุญุฏูุซ ุงูููุงูุน ุจุดูู ุฏูุฑู.
    - ูููู ุชุนุฏูู ุงูููุช ุญุณุจ ุงูุญุงุฌุฉ (ูุซูุงู: ูู ููู ุงูุณุงุนุฉ 12:00)
    """
    # ุชุญุฏูุซ ูููู
    schedule.every().day.at("12:00").do(update_free_arabic_sites)

    # ุชุญุฏูุซ ูู ุณุงุนุฉ (ุงุฎุชูุงุฑู)
    # schedule.every(1).hours.do(update_free_arabic_sites)

    print("๐ ุจุฏุก ุชุดุบูู ุฌุฏูู ุงูุชุญุฏูุซุงุช ุงูุฏูุฑูุฉ...")
    while True:
        schedule.run_pending()
        time.sleep(60)


# =========================
# ููุทุฉ ุงูุจุฏุงูุฉ
# =========================
if __name__ == "__main__":
    update_free_arabic_sites()  # ุชุญุฏูุซ ุฃููู ุนูุฏ ุชุดุบูู ุงูุณูุฑุจุช
    schedule_updates()           # ุชุดุบูู ุงูุฌุฏูู ุงูุฏูุฑู
